function createXHR() {
    var xhr = null;
    if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest()
    } else {
        if (window.ActiveXObject) {
            xhr = new ActiveXObject("Microsoft.XMLHTTP")
        }
    }
    return xhr
}

function getIpInfo() {
    var xhr = createXHR();
    xhr.open("GET", API_IP_INFO, false);
    xhr.onreadystatechange = function () {
        if (this.readyState == 4) {
            var data = JSON.parse(this.responseText);
            console.log("data");
            cityLocation = data.longitude + "," + data.latitude;
            cIp = data.ip;
            city = data.region;
            timezoneOffset = parseInt(data.utc_offset || "+0800") * 0.6
        }
    };
    xhr.send(null)
}

getIpInfo();